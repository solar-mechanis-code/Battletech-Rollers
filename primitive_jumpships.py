"""
Primitive JumpShip class database.

Auto-generated from the user's uploaded PDF:
  Big Book of Primitive Jumpships V3.pdf

Notes:
- 'year' is the earliest intro/model year found on a record sheet Type line (if present).
- 'rarity' is a rough guess based on how many distinct variants are present in the PDF.
- For anything you disagree with, add/override entries in primitive_jumpship_overrides.py.
"""

PRIMITIVE_JUMPSHIP_DB = [
  {
    "name": "Pathfinder",
    "tech": "IS",
    "year": 2108,
    "rarity": "rare",
    "variant_years": [
      2108,
      2130
    ],
    "variant_count": 2
  },
  {
    "name": "Ark",
    "tech": "IS",
    "year": 2116,
    "rarity": "uncommon",
    "variant_years": [
      2116,
      2130,
      2151
    ],
    "variant_count": 4
  },
  {
    "name": "Aquilla",
    "tech": "IS",
    "year": 2151,
    "rarity": "common",
    "variant_years": [
      2151,
      2205,
      2251,
      2300,
      2320,
      2325,
      2370
    ],
    "variant_count": 8
  },
  {
    "name": "Admiral",
    "tech": "IS",
    "year": 2205,
    "rarity": "common",
    "variant_years": [
      2205,
      2240,
      2251
    ],
    "variant_count": 6
  },
  {
    "name": "Cimarron",
    "tech": "IS",
    "year": 2205,
    "rarity": "uncommon",
    "variant_years": [
      2205,
      2251,
      2300
    ],
    "variant_count": 5
  },
  {
    "name": "Saint Barbara",
    "tech": "IS",
    "year": 2205,
    "rarity": "uncommon",
    "variant_years": [
      2205,
      2240,
      2251,
      2300,
      2320
    ],
    "variant_count": 3
  },
  {
    "name": "Bowen",
    "tech": "IS",
    "year": 2240,
    "rarity": "common",
    "variant_years": [
      2240,
      2251,
      2260,
      2300
    ],
    "variant_count": 9
  },
  {
    "name": "Carson",
    "tech": "IS",
    "year": 2251,
    "rarity": "uncommon",
    "variant_years": [
      2251,
      2300
    ],
    "variant_count": 3
  },
  {
    "name": "Raven",
    "tech": "IS",
    "year": 2225,
    "rarity": "uncommon",
    "variant_years": [
      2225,
      2300,
      2320,
      2325,
      2370
    ],
    "variant_count": 5
  },
  {
    "name": "Tea Clipper",
    "tech": "IS",
    "year": 2300,
    "rarity": "rare",
    "variant_years": [
      2300,
      2320,
      2325
    ],
    "variant_count": 2
  },
  {
    "name": "Kestrel",
    "tech": "IS",
    "year": 2130,
    "rarity": "common",
    "variant_years": [
      2130,
      2151,
      2205,
      2240,
      2251,
      2260,
      2300,
      2320,
      2325,
      2370
    ],
    "variant_count": 13
  },
  {
    "name": "Packet",
    "tech": "IS",
    "year": 2230,
    "rarity": "common",
    "variant_years": [
      2230,
      2240,
      2251,
      2260,
      2300,
      2320,
      2325,
      2370
    ],
    "variant_count": 10
  },
  {
    "name": "Sarnath",
    "tech": "IS",
    "year": 2320,
    "rarity": "uncommon",
    "variant_years": [
      2320,
      2325
    ],
    "variant_count": 3
  },
  {
    "name": "Crucis",
    "tech": "IS",
    "year": 2325,
    "rarity": "rare",
    "variant_years": [
      2325,
      2370
    ],
    "variant_count": 2
  },
  {
    "name": "Cassiopeia",
    "tech": "IS",
    "year": 2310,
    "rarity": "uncommon",
    "variant_years": [
      2310,
      2320,
      2325
    ],
    "variant_count": 5
  },
  {
    "name": "Defiant",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Du Shi Wang",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Erikson",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Excalibur",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Harlech",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Hanako",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Kaiser",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Nemed",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Picket",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Predator",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Project Thresher",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Sultan",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Tegetthoff",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  },
  {
    "name": "Type 51",
    "tech": "IS",
    "year": None,
    "rarity": "rare",
    "variant_years": [],
    "variant_count": 2
  },
  {
    "name": "Vritra",
    "tech": "IS",
    "year": None,
    "rarity": "unknown",
    "variant_years": [],
    "variant_count": 1
  }
]

# Default weighting you can tweak.
PRIMITIVE_RARITY_WEIGHTS = {
  "common": 1.0,
  "uncommon": 0.6,
  "rare": 0.01,
  "unknown": 0.07,
}

try:
    from primitive_jumpship_overrides import PRIMITIVE_JS_OVERRIDES
except Exception:
    PRIMITIVE_JS_OVERRIDES = {}

def apply_primitive_overrides(db):
    """Apply PRIMITIVE_JS_OVERRIDES by class name."""
    by_name = {d["name"]: d for d in db}
    for name, data in PRIMITIVE_JS_OVERRIDES.items():
        if name not in by_name:
            continue
        if data.get("year") is not None:
            by_name[name]["year"] = data["year"]
        if data.get("tech") is not None:
            by_name[name]["tech"] = data["tech"]
        if data.get("rarity"):
            by_name[name]["rarity"] = data["rarity"]
    return db

PRIMITIVE_JUMPSHIP_DB = apply_primitive_overrides(PRIMITIVE_JUMPSHIP_DB)
